// Skill normalizer for consistent storage
window.normalizeSkill = function(skill) {
  if (!skill) return '';
  
  // Common corrections
  const skillCorrections = {
    'websphere': 'WebSphere',
    'web sphere': 'WebSphere',
    'websphere message broker': 'WebSphere Message Broker',
    'web sphere message broker': 'WebSphere Message Broker',
    'websphere mq': 'WebSphere MQ',
    'web sphere mq': 'WebSphere MQ',
    'websphere application server': 'WebSphere Application Server',
    'was': 'WebSphere Application Server',
    'wmb': 'WebSphere Message Broker',
    'ibm mq': 'IBM MQ',
    'mq series': 'MQ Series',
    'javascript': 'JavaScript',
    'java script': 'JavaScript',
    'nodejs': 'Node.js',
    'node js': 'Node.js',
    'reactjs': 'React.js',
    'react js': 'React.js',
    'react': 'React.js',
    'vuejs': 'Vue.js',
    'vue js': 'Vue.js',
    'vue': 'Vue.js',
    'angular js': 'AngularJS',
    'angularjs': 'AngularJS',
    'asp.net': 'ASP.NET',
    'asp net': 'ASP.NET',
    '.net': '.NET',
    'dot net': '.NET',
    'c#': 'C#',
    'c sharp': 'C#',
    'c++': 'C++',
    'c plus plus': 'C++',
    'sql server': 'SQL Server',
    'ms sql': 'Microsoft SQL Server',
    'mssql': 'Microsoft SQL Server',
    'mongodb': 'MongoDB',
    'mongo db': 'MongoDB',
    'postgresql': 'PostgreSQL',
    'postgres': 'PostgreSQL',
    'mysql': 'MySQL',
    'my sql': 'MySQL',
    'aws': 'AWS',
    'amazon web services': 'AWS',
    'gcp': 'Google Cloud Platform',
    'google cloud': 'Google Cloud Platform',
    'azure': 'Microsoft Azure',
    'ms azure': 'Microsoft Azure',
    'docker': 'Docker',
    'kubernetes': 'Kubernetes',
    'k8s': 'Kubernetes',
    'jenkins': 'Jenkins',
    'git': 'Git',
    'github': 'GitHub',
    'gitlab': 'GitLab',
    'bitbucket': 'Bitbucket',
    'jira': 'JIRA',
    'agile': 'Agile',
    'scrum': 'Scrum',
    'devops': 'DevOps',
    'dev ops': 'DevOps',
    'ci/cd': 'CI/CD',
    'cicd': 'CI/CD',
    'rest api': 'REST API',
    'restful': 'RESTful',
    'graphql': 'GraphQL',
    'graph ql': 'GraphQL',
    'microservices': 'Microservices',
    'micro services': 'Microservices',
    'machine learning': 'Machine Learning',
    'ml': 'Machine Learning',
    'deep learning': 'Deep Learning',
    'dl': 'Deep Learning',
    'artificial intelligence': 'Artificial Intelligence',
    'ai': 'AI',
    'data science': 'Data Science',
    'data analysis': 'Data Analysis',
    'data analytics': 'Data Analytics',
    'business intelligence': 'Business Intelligence',
    'bi': 'Business Intelligence',
    'etl': 'ETL',
    'html': 'HTML',
    'html5': 'HTML5',
    'css': 'CSS',
    'css3': 'CSS3',
    'sass': 'SASS',
    'scss': 'SCSS',
    'less': 'LESS',
    'typescript': 'TypeScript',
    'type script': 'TypeScript',
    'ts': 'TypeScript',
    'python': 'Python',
    'java': 'Java',
    'spring': 'Spring',
    'spring boot': 'Spring Boot',
    'springboot': 'Spring Boot',
    'hibernate': 'Hibernate',
    'django': 'Django',
    'flask': 'Flask',
    'fastapi': 'FastAPI',
    'fast api': 'FastAPI',
    'ruby': 'Ruby',
    'ruby on rails': 'Ruby on Rails',
    'rails': 'Ruby on Rails',
    'php': 'PHP',
    'laravel': 'Laravel',
    'symfony': 'Symfony',
    'go': 'Go',
    'golang': 'Go',
    'rust': 'Rust',
    'swift': 'Swift',
    'kotlin': 'Kotlin',
    'scala': 'Scala',
    'r': 'R',
    'matlab': 'MATLAB',
    'sas': 'SAS',
    'spss': 'SPSS',
    'tableau': 'Tableau',
    'power bi': 'Power BI',
    'powerbi': 'Power BI',
    'excel': 'Microsoft Excel',
    'ms excel': 'Microsoft Excel',
    'word': 'Microsoft Word',
    'ms word': 'Microsoft Word',
    'powerpoint': 'PowerPoint',
    'power point': 'PowerPoint',
    'linux': 'Linux',
    'unix': 'Unix',
    'windows': 'Windows',
    'macos': 'macOS',
    'mac os': 'macOS',
    'ios': 'iOS',
    'android': 'Android',
    'react native': 'React Native',
    'flutter': 'Flutter',
    'xamarin': 'Xamarin',
    'unity': 'Unity',
    'unreal engine': 'Unreal Engine',
    'ue4': 'Unreal Engine 4',
    'ue5': 'Unreal Engine 5',
    'tensorflow': 'TensorFlow',
    'tensor flow': 'TensorFlow',
    'pytorch': 'PyTorch',
    'py torch': 'PyTorch',
    'keras': 'Keras',
    'scikit-learn': 'scikit-learn',
    'sklearn': 'scikit-learn',
    'pandas': 'pandas',
    'numpy': 'NumPy',
    'matplotlib': 'Matplotlib',
    'opencv': 'OpenCV',
    'open cv': 'OpenCV',
    'elasticsearch': 'Elasticsearch',
    'elastic search': 'Elasticsearch',
    'redis': 'Redis',
    'rabbitmq': 'RabbitMQ',
    'rabbit mq': 'RabbitMQ',
    'kafka': 'Apache Kafka',
    'apache kafka': 'Apache Kafka',
    'spark': 'Apache Spark',
    'apache spark': 'Apache Spark',
    'hadoop': 'Hadoop',
    'hive': 'Apache Hive',
    'apache hive': 'Apache Hive',
    'airflow': 'Apache Airflow',
    'apache airflow': 'Apache Airflow',
    'terraform': 'Terraform',
    'ansible': 'Ansible',
    'chef': 'Chef',
    'puppet': 'Puppet',
    'nagios': 'Nagios',
    'prometheus': 'Prometheus',
    'grafana': 'Grafana',
    'splunk': 'Splunk',
    'new relic': 'New Relic',
    'datadog': 'Datadog',
    'sentry': 'Sentry',
    'postman': 'Postman',
    'swagger': 'Swagger',
    'openapi': 'OpenAPI',
    'open api': 'OpenAPI',
    'soap': 'SOAP',
    'xml': 'XML',
    'json': 'JSON',
    'yaml': 'YAML',
    'yml': 'YAML',
    'oauth': 'OAuth',
    'oauth2': 'OAuth 2.0',
    'jwt': 'JWT',
    'ssl': 'SSL/TLS',
    'tls': 'SSL/TLS',
    'vpn': 'VPN',
    'tcp/ip': 'TCP/IP',
    'http': 'HTTP',
    'https': 'HTTPS',
    'websocket': 'WebSocket',
    'web socket': 'WebSocket',
    'grpc': 'gRPC',
    'mqtt': 'MQTT',
    'amqp': 'AMQP',
    'ldap': 'LDAP',
    'active directory': 'Active Directory',
    'ad': 'Active Directory',
    'saml': 'SAML',
    'sso': 'SSO',
    'oidc': 'OIDC',
    'blockchain': 'Blockchain',
    'ethereum': 'Ethereum',
    'solidity': 'Solidity',
    'web3': 'Web3',
    'nft': 'NFT',
    'defi': 'DeFi',
    'smart contracts': 'Smart Contracts',
    'cryptocurrency': 'Cryptocurrency',
    'crypto': 'Cryptocurrency',
    'bitcoin': 'Bitcoin',
    'btc': 'Bitcoin'
  };
  
  // Check for exact match in corrections (case-insensitive)
  const skillLower = skill.toLowerCase().trim();
  if (skillCorrections[skillLower]) {
    return skillCorrections[skillLower];
  }
  
  // Check for partial matches (e.g., "WebSphere MQ Series" -> "WebSphere MQ")
  for (const [pattern, replacement] of Object.entries(skillCorrections)) {
    if (skillLower.includes(pattern) && pattern.includes(' ')) {
      // For multi-word patterns, replace the pattern portion
      return skill.replace(new RegExp(pattern, 'gi'), replacement);
    }
  }
  
  // Otherwise, preserve original casing but clean up
  return skill.trim();
};

console.log('Skill normalizer loaded');